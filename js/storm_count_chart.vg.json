{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": { "text": "Number of tropical storms above category 2 per year" },
    "width": "container",
    "height": "container",
    "params": [
        { "name": "yearSelect", "value": 2000,
          "bind": {"element": "#t_slider"}
        }
    ],
    "layer": [
        {
            "data": {
                "url": "data/IDCKMSTM0S_clean.csv",
                "format":{"type": "csv"}
            },
            "transform": [
                {
                    "filter": "year(datum.TM) > 1990"
                },
                {
                    "filter": "datum.SURFACE_CODE > 2"
                }
            ],
            "mark": "bar",
            "encoding": {
                "x": { "timeUnit":"utcyear", "field": "TM", "type": "ordinal", "title":"Year"},
                "y": { "aggregate": "count", "field":"DISTURBANCE_ID", "type": "quantitative", "title":"Number of storms" },
                "color": {"aggregate": "count", "field":"DISTURBANCE_ID", "type": "quantitative","title":"Storms", "scale":{"scheme": "teals"}},
                "tooltip": [
                    {"timeUnit":"utcyear", "field": "TM", "type":"ordinal", "title":"Date"},
                    {"aggregate": "count", "type":"quantitative", "title":"Storms"}]
            }
        }
    ]
}