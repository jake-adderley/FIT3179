{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": { "text": "Number of storms per year" },
    "width": "container",
    "height": "container",
    "params": [
        { "name": "yearSelect", "value": 2000,
          "bind": {"element": "#t_slider"}
        }
    ],
    "transform": [
        {
            "calculate": "year(datum.TM)",
            "as": "year"
        },
        {
            "aggregate": [{"op": "count", "field": "year", "as": "yearCount"}]
        }
    ],
    "layer": [
        {
            "data": {
                "url": "data/IDCKMSTM0S.csv"
            },
            "mark": "bar",
            "encoding": {
                "y": { "field": "yearCount", "type": "quantitative"},
                "x": { "field": "year", "type": "ordinal" }
            }
        },
        {
            "data": {"values": [{}]},
            "mark": {"type": "rule", "strokeDash": [2, 2], "size": 2},
            "encoding": {
              "x": {"datum": "2000"}
            }
        }
    ]
}