{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": { "text": "El NiÃ±o-Southern Oscillation Index" },
    "width": "container",
    "height": "container",
    "layer": [
        {
            "transform": [{"filter":"year(datum.date) > 1990"}],
            "data": {
                "url": "data/meiv2_cleaner.csv",
                "format":{"type": "csv"}
            },
            "mark": "bar",
            "encoding": {
                "y": { "field": "val", "type":"quantitative", "title":"ENSO Index"},
                "x": { "field": "date", "type": "temporal","title":"Date", "axis": {"tickCount":{"interval": "year","step": 2}} },
                "color": {"field": "val","type":"quantitative", "title":"Index", "scale": {"scheme":"redblue", "reverse":true}},
                "tooltip": [
                    {"field": "date", "type":"temporal", "title":"Date"},
                    {"field": "val", "type":"quantitative", "title":"Index"}]
            }
        },
        {
            "params": [{
              "name": "brush",
              "select": {"type": "interval", "encodings": ["x"]}
            }],
            "mark": "bar",
            "encoding": {
              "x": {"field": "date", "bin": true,"title":null},
              "y": {"aggregate": "count"}
            }
        }
    ]
}